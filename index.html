<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="你好">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="你好">

    <!--Type page-->
    
        <meta property="og:type" content="website">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>你好</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">你好</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/用户与组的管理/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="1-用户与用户组概念"><a href="#1-用户与用户组概念" class="headerlink" title="1.用户与用户组概念"></a>1.用户与用户组概念</h1><p>Linux 是一个多用户、多任务的服务器操作系统。Linux 用户是根据角色定义的，具体分 为三种角色： </p>
<p>超级用户：拥有对系统的最高管理权限，默认是 root 用户。 </p>
<p>通用户：只能对自己目录下的文件进行访问和修改，具有登录系统的权限。 </p>
<p>虚拟用户：也叫“伪”用户，这类用户最大的特点是不能登录系统，它们的存在主要是 方便系统管理，满足相应的系统进程对文件属主的要求。</p>
<p>主要组（主组）：每个用户有且只有一个主要组，创建用户时默认创建。 </p>
<p>附属组（补充组）：用户可以是零个或多个附属组成员。一般用于帮助确保用户具有对 系统中文件及其他资源的访问权限。</p>
<h1 id="2、用户配置文件"><a href="#2、用户配置文件" class="headerlink" title="2、用户配置文件"></a>2、用户配置文件</h1><h2 id="（1）用户配置文件-etc-passwd，"><a href="#（1）用户配置文件-etc-passwd，" class="headerlink" title="（1）用户配置文件/etc/passwd，"></a>（1）用户配置文件/etc/passwd，</h2><p>在 passwd 配置文件中，从左到右各个字段的含义如下： </p>
<p>用户名：用户登录系统时使用的用户名。</p>
<p> 口令：存放加密的口令，被/etc/shadow 文件保护。 </p>
<p>用户标识号(UID)：系统内部用它来标识用户，每个用户的 UID 都是唯一的。 </p>
<p>用户组标识号(GID)：系统内部用它来标识用户所属的组，这里的 GID 是主组 GID。 注释性描述：为了方便管理和记忆该用户而添加的信息。</p>
<p> 用户主目录：也称家目录，用户登录系统后所进入的目录。 </p>
<p>命令解释器：指示该用户使用的 Shell，CentOS Linux 7 默认的是 bash。如果指定 Shell 为/sbin/nologin，则代表用户无法登录系统。 </p>
<h2 id="（2）用户密码配置文件-etc-shadow"><a href="#（2）用户密码配置文件-etc-shadow" class="headerlink" title="（2）用户密码配置文件/etc/shadow"></a>（2）用户密码配置文件/etc/shadow</h2><p>用户名：用户账户名。 </p>
<p>密码：用户的加密密码。</p>
<p> 最后一次修改的时间：从 1970 年 1 月 1 日起，到用户最后一次更改密码的天数。 </p>
<p>最小时间间隔：从 1970 年 1 月 1 日起，到用户可以更改密码的天数，(0 表示随时可以变更)。 </p>
<p>最大时间间隔：从 1970 年 1 月 1 日起，到必须更改密码的天数，否则密码将过期，(99999 表示永远不 过期)。</p>
<p> 警告时间：在密码过期之前多少天提醒用户更新，默认值是 7 天。</p>
<p> 不活动时间：在用户密码过期之后到禁用账户的天数。</p>
<p>2失效时间：从 1970 年 1 月 1 日起，到账户被禁用的天数。 标志：保留位。</p>
<h1 id="3、用户组配置文件"><a href="#3、用户组配置文件" class="headerlink" title="3、用户组配置文件"></a>3、用户组配置文件</h1><h2 id="（1）用户组配置文件-etc-group，"><a href="#（1）用户组配置文件-etc-group，" class="headerlink" title="（1）用户组配置文件/etc/group，"></a>（1）用户组配置文件/etc/group，</h2><p>文件中各字段的含义从左到右分别是： </p>
<p>组名：组的名称。</p>
<p> 组口令：用户组的口令，用 x 表示口令是被/etc/gshadow 文件保护的。</p>
<p> 组标识号(GID)：系统内部用它来标识用户组，每个用户组的 GID 都是唯一的。</p>
<p> 组成员：该组的成员。 </p>
<h2 id="（2）用户组密码配置文件-etc-gshadow，"><a href="#（2）用户组密码配置文件-etc-gshadow，" class="headerlink" title="（2）用户组密码配置文件/etc/gshadow，"></a>（2）用户组密码配置文件/etc/gshadow，</h2><p>文件中各字段的含义从左到右分别是： </p>
<p>组名：组的名称。 </p>
<p>组口令：用户组的口令，保存已加密的口令。</p>
<p>组的管理员帐号：组的管理员帐号，管理员有权对该组添加、删除帐号。</p>
<p> 组成员：该组的成员，多个用户用“，”分开。</p>
<h1 id="4、用户管理"><a href="#4、用户管理" class="headerlink" title="4、用户管理"></a>4、用户管理</h1><h2 id="（1）用-useradd-命令创建用户"><a href="#（1）用-useradd-命令创建用户" class="headerlink" title="（1）用 useradd 命令创建用户"></a>（1）用 useradd 命令创建用户</h2><p>命令格式：useradd [选项] 用户名<br>选项 功能说明<br>        -d 指定用户主目录<br>        -g 指定用户组<br>        -m 若主目录不存在，则创建<br>        -M 不创建主目录<br>        -s 指定登录时使用的 Shell 类型，默认为/bin/bash，如果为 /bin/nologin 就是虚拟用户<br>        -c 设置对该账号的注释说明文字<br>        -r 创建系统账号(用户 ID 小于 1000， 从 999 起按照递减的顺序创建)， 默认不创建对应的主目录<br>        -u 手工指定新用户的 ID 值，该值必须唯一，且大于 999。 </p>
<h2 id="（2）用-passwd-命令管理用户登录密码"><a href="#（2）用-passwd-命令管理用户登录密码" class="headerlink" title="（2）用 passwd 命令管理用户登录密码"></a>（2）用 passwd 命令管理用户登录密码</h2><p>命令格式：passwd [选项] [用户名称] 选项 功能说明<br>        -l 锁定用户密码<br>        -u 解锁用户密码<br>        -S 查询用户密码状态<br>        -d 删除用户密码</p>
<p>【举例 1】创建用户 zhangsan,指定登录类型为/bin/bash;用户 lisi，登录类型为 /sbin/nologin,并分别设置密码为：123456。并测试两个用户能否登录系统。 </p>
<p>#useradd -s /bin/bash zhangsan #useradd -s /bin/nologin lisi </p>
<p>【举例 2】创建用户 tom，并设置 tom 的真实姓名为:tom-sing,家庭电话：13911202319，公 司地址：tf5jie,公司电话：028-85699999 </p>
<p>#useradd -c “tom-sing 13911202319 tf5jie 028-85699999” tom</p>
<h2 id="（3）用-usermod-命令修改用户属性"><a href="#（3）用-usermod-命令修改用户属性" class="headerlink" title="（3）用 usermod 命令修改用户属性"></a>（3）用 usermod 命令修改用户属性</h2><p> 命令格式：usermod 选项 用户名<br>选项 功能说明<br>        -l 修改用户名<br>        -c 修改用户描述信息<br>        -d 修改主目录<br>        -L 锁定帐号，临时禁止用户登录<br>        -U 对帐号解锁<br>        -g 修改用户所属组<br>        -G 修改用户附加组<br>        -s 修改用户登录的 shell 类型<br>        -u 修改用户 ID 号<br>        -e 修改用户有效期<br>        -f 修改用户密码在多少天后过期</p>
<p> 【举例 1】修改用户 tom 的名字为 jack #usermod -l jack tom </p>
<p>【举例 2】修改用户 jack 的注释名为 jack-sing # usermod -c jack-sing jack </p>
<p>【举例 3】# usermod -s /bin/nologin jack</p>
<h2 id="（4）用-userdel-命令删除用户"><a href="#（4）用-userdel-命令删除用户" class="headerlink" title="（4）用 userdel 命令删除用户"></a>（4）用 userdel 命令删除用户</h2><p>命令格式：userdel [-r] 用户名</p>
<h2 id="（5）用于修改用户口令有效期限的-chage-命令"><a href="#（5）用于修改用户口令有效期限的-chage-命令" class="headerlink" title="（5）用于修改用户口令有效期限的 chage 命令"></a>（5）用于修改用户口令有效期限的 chage 命令</h2><p>命令格式：chage [选项] 用户名 选项 功能说明<br>        -m 密码可更改的最小天数。为零时代表任何时候都可以更改密码<br>        -W 用户密码到期前，提前收到警告信息的天数<br>        -M 密码保持有效的最大天数<br>        -E 账号到期的日期。过了这天，此账号将不可用<br>        -d 上一次更改的日期<br>        -I 停滞时期。如果一个密码已过期这些天，那么此账号将不可用<br>        -l 列出当前的设置。由非特权用户来确定他们的密码或账号何时过期 </p>
<p>【举例】设置 jack 用户的密码最大有效期为 30 天，提前 9 天警告，失效时间 40 天。</p>
<p> #chage -M 18054 -W 9 -E 18064</p>
<h2 id="（6）修改用户注释信息的-chfn-命令"><a href="#（6）修改用户注释信息的-chfn-命令" class="headerlink" title="（6）修改用户注释信息的 chfn 命令"></a>（6）修改用户注释信息的 chfn 命令</h2><p>命令格式：chfn [选项] [用户名] 选项 功能说明<br>-f 设置真实姓名。<br>-h 设置家中的电话号码。<br>-o 设置办公室的地址。<br>-p 设置办公室的电话号码。</p>
<h2 id="（7）修改用户-Shell-类型的-chsh-命令-命令格式：chsh-s-用户名"><a href="#（7）修改用户-Shell-类型的-chsh-命令-命令格式：chsh-s-用户名" class="headerlink" title="（7）修改用户 Shell 类型的 chsh 命令 命令格式：chsh [s] [用户名]"></a>（7）修改用户 Shell 类型的 chsh 命令 命令格式：chsh [s] [用户名]</h2><h1 id="5、用户组管理"><a href="#5、用户组管理" class="headerlink" title="5、用户组管理"></a>5、用户组管理</h1><p>（1）用 groupadd 命令创建用户组 命令格式：groupadd [r] 用户组名称<br>（2）用 groupmod 命令修改用户组属性 命令格式：groupmod 选项 组名 选项 功能说明<br>-n 修改组名<br>-g 修改组标识号 GID<br>（3）用 groupdel 命令删除用户组 命令格式：groupdel 组名<br>（4）用 gpasswd 命令维护组中成员  </p>
<p>命令格式：gpasswd 选项 用户名 组名 </p>
<p> 选项 功能说明<br>-a 添加用户到组。<br>-d 将用户从组中删除。<br>-A 设置用户为组管理员。<br>【举例】新建 yanyan、yuanyuan、lili 三个用户和 teacher 组将 lili 设置为 teacher 组的管理员，那么 lili 就具有向该组添加用户和移除用户的权限。也可以为该 组设置密码，其他用户就可以通过 newgrp 命令切换成该组的成员身份，否则只 有本组成员才能使用该组身份。 #useradd yanyan #useradd yuanyuan #useradd lili #gpasswd -a lili teacher </p>
<p>-#gpasswd -A lili teacher #gpasswd teacher</p>
<h1 id="6、扩展知识"><a href="#6、扩展知识" class="headerlink" title="6、扩展知识"></a>6、扩展知识</h1><p>（1）查看用户信息的 id 命令 </p>
<p>（2）输出指定用户所在组 groups 命令 </p>
<p>（3）查看当前登录用户 who am i 命令 </p>
<p>（4）查看当前用户 w 命令 </p>
<p>（5）查看登录用户 who 命令 </p>
<p>（6）查看登录用户历史 last 命令</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/网络连接/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="一、主机名的配置（配置文件-etc-hostname）"><a href="#一、主机名的配置（配置文件-etc-hostname）" class="headerlink" title="一、主机名的配置（配置文件/etc/hostname）"></a>一、主机名的配置（配置文件/etc/hostname）</h1><h2 id="1、使用-hostname-命令临时设置主机名"><a href="#1、使用-hostname-命令临时设置主机名" class="headerlink" title="1、使用 hostname 命令临时设置主机名"></a>1、使用 hostname 命令临时设置主机名</h2><p>命令格式：hostname [新主机名] </p>
<h2 id="2．永久设置主机名"><a href="#2．永久设置主机名" class="headerlink" title="2．永久设置主机名"></a>2．永久设置主机名</h2><p> 命令格式：hostnamectl set-hostname 新主机名</p>
<h1 id="二、网卡信息的配置"><a href="#二、网卡信息的配置" class="headerlink" title="二、网卡信息的配置"></a>二、网卡信息的配置</h1><p>1、网卡配置文件 位于:/etc/sysconfig/network-scripts 目录下,一块网卡对应一个配置文件。 </p>
<p>ifcfg-ens33 为网卡配置文件，常用配置项的含义如下：</p>
<p> DEVICE=ens33 //定义该网卡的识别名称。</p>
<p> BOOTPROTO=dhcp //启动该网卡的方式</p>
<p>dhcp 表示通过 BOOTP 或 DHCP 协议动态取得 IP 地址。 </p>
<p>ONBOOT=yes //启动 network 服务时，是否启动该网卡。 </p>
<p>TYPE=Ethernet //网卡的类型。</p>
<p> IPADDR=192.168.64.128 //静态方式指定网卡的 IP 地址 </p>
<p>NETMASK=255.255.255.0 //定义网卡的子网掩码</p>
<p> MTU=1500 //网卡传输的最大数据包</p>
<p> GATEWAY=192.168.64.254 //网络的默认网关  </p>
<h1 id="2、配置网卡信息"><a href="#2、配置网卡信息" class="headerlink" title="2、配置网卡信息"></a>2、配置网卡信息</h1><h2 id="（1）直接修改网卡配置文件"><a href="#（1）直接修改网卡配置文件" class="headerlink" title="（1）直接修改网卡配置文件"></a>（1）直接修改网卡配置文件</h2><p> #vim /etc/sysconfig/network-scripts ifcfg-ens33 </p>
<p>修改完成后重启服务才生效 #systemctl restart network.service </p>
<h2 id="（2）ifconfig-命令"><a href="#（2）ifconfig-命令" class="headerlink" title="（2）ifconfig 命令"></a>（2）ifconfig 命令</h2><h3 id="①查看网卡信息"><a href="#①查看网卡信息" class="headerlink" title="①查看网卡信息"></a>①查看网卡信息</h3><p>命令格式：ifconfig [选项] </p>
<p>无选项：显示当前活动的网卡。</p>
<p>–a ：显示系统中所有网卡配置信息。 </p>
<p>网卡设备名：显示指定网卡配置信息。 </p>
<h3 id="②设置-IP-地址（临时的）"><a href="#②设置-IP-地址（临时的）" class="headerlink" title="②设置 IP 地址（临时的）"></a>②设置 IP 地址（临时的）</h3><p>命令格式：ifconfig 网卡设备名 IP 地址 netmask 子网掩码</p>
<p> ③ 修改网卡的 MAC 地址（先禁用网卡，修改后重启网卡） 命令格式：ifconfig 网卡设备名 hw ether MAC 地址</p>
<h2 id="（3）网卡常用命令"><a href="#（3）网卡常用命令" class="headerlink" title="（3）网卡常用命令"></a>（3）网卡常用命令</h2><h3 id="①-ifdown（禁用网卡）"><a href="#①-ifdown（禁用网卡）" class="headerlink" title="① ifdown（禁用网卡）"></a>① ifdown（禁用网卡）</h3><p>命令格式：ifdown 网卡设备名 </p>
<h3 id="②-ifup（重启网卡）"><a href="#②-ifup（重启网卡）" class="headerlink" title="② ifup（重启网卡）"></a>② ifup（重启网卡）</h3><p>命令格式：ifup 网卡设备名</p>
<h3 id="③绑定-IP-和-MAC-地址"><a href="#③绑定-IP-和-MAC-地址" class="headerlink" title="③绑定 IP 和 MAC 地址"></a>③绑定 IP 和 MAC 地址</h3><p>【举例】创建/etc/ethers 文件，将 193.168.168.154 与 00：0C：29：03：F3：75 网卡绑定。</p>
<p> #echo “193.168.168.154 00：0C：29：03：F3：75” &gt;&gt;/etc/ethers </p>
<p>#arp -f</p>
<h1 id="三、常用网络调试命令与故障排查"><a href="#三、常用网络调试命令与故障排查" class="headerlink" title="三、常用网络调试命令与故障排查"></a>三、常用网络调试命令与故障排查</h1><h2 id="1．ping-命令："><a href="#1．ping-命令：" class="headerlink" title="1．ping 命令："></a>1．ping 命令：</h2><p>测试网络中是否畅通以及网络质量。 </p>
<p>命令格式：ping [选项] 对方 IP 地址 选项说明：</p>
<p> -c : 指定向目的主机发送多少个报文。</p>
<p> -s :指定发送报文的大小，以字节为单位。</p>
<p> -W: 设置等待接收回应报文的时间间隔，以秒为单位。</p>
<h2 id="2．netstat-命令："><a href="#2．netstat-命令：" class="headerlink" title="2．netstat 命令："></a>2．netstat 命令：</h2><p>显示网络连接、路由表、正在监听的端口等信息。 </p>
<p>命令格式：netstat [选项] </p>
<p>选项说明： -l : 显示正在监听的服务或端口。</p>
<p>-a : 显示当前主机开放的所有端口 </p>
<p>-n : 不进行域名解析。</p>
<p> -p : 显示端口是由哪个进程和程序在监听。 </p>
<p>-c : 动态显示网络连接和端口监听信息。 </p>
<p>-i : 显示网卡相关信息。 </p>
<p>-r : 显示当前主机的路由表信息</p>
<h2 id="3．traceroute-命令：路由跟踪。"><a href="#3．traceroute-命令：路由跟踪。" class="headerlink" title="3．traceroute 命令：路由跟踪。"></a>3．traceroute 命令：路由跟踪。</h2><p> 命令格式：traceroute 目的 IP 地址 </p>
<h2 id="4．nslookup-命令"><a href="#4．nslookup-命令" class="headerlink" title="4．nslookup 命令:"></a>4．nslookup 命令:</h2><p>检测指定的 DNS 服务器工作是否正常 </p>
<p>命令格式：nslookup</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/软件安装与包管理工具/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="Linux-系统下安装软件的方法"><a href="#Linux-系统下安装软件的方法" class="headerlink" title="Linux 系统下安装软件的方法"></a>Linux 系统下安装软件的方法</h1><h1 id="一、RPM-包安装"><a href="#一、RPM-包安装" class="headerlink" title="一、RPM 包安装"></a>一、RPM 包安装</h1><p>RPM 主要有５种基本功能：查询、安装、升级、刷新、卸载。</p>
<p> 命令格式：rpm [选项] [文件]</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577116258032.png" alt="1577116258032"></p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577116298477.png" alt="1577116298477"></p>
<h2 id="（1）查询"><a href="#（1）查询" class="headerlink" title="（1）查询"></a>（1）查询</h2><p> 软件包的查询功能主要由-q选项完成，为了实现特殊的查询功能要配合其它的选项使用。 </p>
<p>【举例 2】在已经安装的软件包中查询包含 lib 关键字的软件包的名称。 </p>
<p>#rpm -qa | grep lib </p>
<p>【举例 3】查询 openssh-server 软件包是否已经安装。</p>
<p> #rpm -q openssh-server</p>
<p>【举例 6】查询 openssh-server 软件包中有哪些文件，以及这些文件安装在系统的位置。</p>
<p> #rpm -ql openssh-server </p>
<p>【举例 7】查询/var/empty/sshd 目录是安装哪一个软件包而创建的 </p>
<p>#rpm -qf /var/empty/sshd</p>
<h2 id="（2）安装：rpm-ivh-软件包名称"><a href="#（2）安装：rpm-ivh-软件包名称" class="headerlink" title="（2）安装：rpm -ivh 软件包名称"></a>（2）安装：rpm -ivh 软件包名称</h2><p>【举例 1】安装 telnet-server-0.17-59.el7.x86_64.rpm 软件包 </p>
<p>#rpm -ivh telnet-server-0.17-59.el7.x86_64.rpm</p>
<p>（3）升级是先将低版本的软件包卸载，再安装高版本的软件包。</p>
<p> 【举例 1】升级 telnet 软件为 telnet-server-0.17-59.el7.x86_64.rpm 软件包。 </p>
<p>#rpm -Uvh telnet-server-0.17-59.el7.x86_64.rpm</p>
<h2 id="（4）刷新，"><a href="#（4）刷新，" class="headerlink" title="（4）刷新，"></a>（4）刷新，</h2><p>如果选项指定软件包的版本更高，会升级安装。如果未安装该软件包，刷新选 项不会安装软件包。 </p>
<p>【举例 1】刷新 telnet-server-0.17-59.el7.x86_64.rpm 软件包</p>
<p> #rpm -Fvh telnet-server-0.17-59.el7.x86_64.rpm</p>
<h2 id="（5）卸载"><a href="#（5）卸载" class="headerlink" title="（5）卸载"></a>（5）卸载</h2><p>【举例 1】将 telnet-server 软件从系统中卸载。 </p>
<p>#rpm -e telnet-server </p>
<h2 id="（6）常见问题分析："><a href="#（6）常见问题分析：" class="headerlink" title="（6）常见问题分析："></a>（6）常见问题分析：</h2><p>·在执行#rpm -qa 命令时，如果输出信息过多，不易查找指定信息。</p>
<p> 解决办法：使用 rpm -qa | grep</p>
<p> ·在查询软件包信息或文件时，想保存执行结果。 </p>
<p>解决办法：使用输出重定向 </p>
<p>·“软件名称”和“软件包名称”。</p>
<p> 解决办法：安装软件时使用软件包名称，查询与卸载时使用软件名称</p>
<p>3、使用 RPM 管理 telnet-server 软件包 </p>
<p>（1）在服务器端安装 telnet-server 和 xinetd，启动相应的服务。</p>
<p> #rpm -q telnet-server xinetd </p>
<p>#mount /dev/sr0 /mnt/cdrom </p>
<p>#cd /mnt/cdrom/Packgr~</p>
<p>#rpm -ivh telnet-server xinetd </p>
<p>#systemctl start telnet.socket xinetd.service</p>
<p>#systemctl status telnet.socket xinetd.service</p>
<p>（2）在服务器端开启防火墙（图形界面与命令）。 </p>
<p>systemctl status firewalld.service # firewall-cmd –zone=public –add-port=23/tcp –permanent # systemctl restart firewalld.service</p>
<p>（3）在客户端访问（默认不允许 root 用户 telnet 登录）。</p>
<p> 开始–运行–cmd Telnet 192.168.64.128</p>
<h1 id="二、YUM-源安装"><a href="#二、YUM-源安装" class="headerlink" title="二、YUM 源安装"></a>二、YUM 源安装</h1><h2 id="1、设置本地-YUM-源"><a href="#1、设置本地-YUM-源" class="headerlink" title="1、设置本地 YUM 源"></a>1、设置本地 YUM 源</h2><p>（1）挂载光盘到/mnt/cdrom </p>
<p>（2）创建自定义 yum 文件:#vim/etc/yum.d/media.repo </p>
<p>[media] </p>
<p>name=CentOS7 </p>
<p>baseurl=file:///mnt/cdrom </p>
<p>enabled=1 </p>
<p>gpgcheck=0 </p>
<p>gpqkey=gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</p>
<p>YUM 工具主要有查询、安装、升级、刷新、卸载软件包等功能。 </p>
<p>命令格式：yum [选项] [指令] [软件包]</p>
<p> install package1 [package2][…] 使用 YUM 源安装软件包。</p>
<p> update [package][packge2][…] 使用 YUM 源升级软件包。 </p>
<p>check-update 检查 YUM 源中所有可用的升级。 </p>
<p>remove|erase package1 [package2][…] 卸载软件包。 </p>
<p>list[…]系统中已经安装的以及 YUM 源中所有可用的软件包。</p>
<p> info[…] 查看软件包信息。</p>
<p> clean all 清空所有的缓存信息。 </p>
<p>makecache all 生成所有的缓存信息</p>
<p> groupinstall group1 [group2] […] 使用 YUM 源安装组包。</p>
<p> groupremove group1 [group2] […] 卸载组包。</p>
<h1 id="三、源代码安装"><a href="#三、源代码安装" class="headerlink" title="三、源代码安装"></a>三、源代码安装</h1><p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577151029434.png" alt="1577151029434"></p>
<h1 id="四、包管理"><a href="#四、包管理" class="headerlink" title="四、包管理"></a>四、包管理</h1><h2 id="tar文件的压缩与解压缩"><a href="#tar文件的压缩与解压缩" class="headerlink" title="tar文件的压缩与解压缩"></a>tar文件的压缩与解压缩</h2><h2 id="ZIP文件的压缩与解压缩"><a href="#ZIP文件的压缩与解压缩" class="headerlink" title="ZIP文件的压缩与解压缩"></a><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577151343790.png" alt="1577151343790">ZIP文件的压缩与解压缩</h2><p>   压缩：# zip -r wp.zip wp<br>   解压到当前目录：# unzip wp.zip<br>   解压到指定目录：#unzip -d /mnt/ wp.zip</p>
<h2 id="RAR文件在压缩与解压缩"><a href="#RAR文件在压缩与解压缩" class="headerlink" title="RAR文件在压缩与解压缩"></a>RAR文件在压缩与解压缩</h2><p>   下载rarlinux-x64-5.7.1.tar.gz：<a href="https://www.rarlab.com/download.htm" target="_blank" rel="noopener">https://www.rarlab.com/download.htm</a><br>    解压后将rar文件复制到/usr/local目录下<br>    然后执行以下命令<br>      ln -s /usr/local/rar/rar /usr/local/bin/rar<br>      ln -s /usr/local/rar/unrar /usr/local/bin/unrar</p>
<pre><code>解压文件：rar x 1.rar
压缩文件：rar a test.rar ./test/ </code></pre>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/服务与进程/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>一、服务与进程管理<br>1、Linux系统的运行级别：0-6<br>   runlevel  查看当前运行的级别<br>   3级别  完全多用户字符界面<br>   5级别  图形化界面<br>   6级别  重启<br>   0级别  关机<br>   切换  init 运行级别<br>  启动级别文件： /etc/systemd/system/default.target–&gt;runlevel5.target</p>
<p>2、服务的管理<br>  systemctl start/restart/stop/status/enable/is-enabled/disable 服务名<br>  systemctl poweroff/reboot<br>  关闭防火墙：systemctl stop firewalld<br>  关闭selinux安全机制：setenforce 0<br>  查看selinux安全机制：getenforce [以P开头：关闭  以E开头：开启]<br>  ntsysv –runlevel 运行级别</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577237407765.png" alt="1577237407765"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/磁盘分区与挂载/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="磁盘的分区与挂载："><a href="#磁盘的分区与挂载：" class="headerlink" title="磁盘的分区与挂载："></a>磁盘的分区与挂载：</h1><p>1.磁盘(硬盘）在Linux系统中的表示方法<br>  IDE硬盘：hda1 hda2  hdb1 hdc1 ….<br>  SATA硬盘/SCSI/USB接口的移动盘：sda1 sda2 sdb1</p>
<p>2.硬盘分区： 主分区    最多只能分4个，是可以直接使用，主要用于系统盘。编号为1-4<br>            扩展分区  不能直接使用，必须有主分区后才能将所有剩余空间分为扩展分区，可以建立逻辑分区。1-4，除主分区外。<br>            逻辑分区   可以直接使用，编号从5开始，不能做为系统引导盘。</p>
<p>第一个扇区最重要，里面有：</p>
<p>主引导区(Master boot record, MBR)</p>
<p>分区表(partition table)</p>
<p>3.磁盘分区的格式：</p>
<p>windows 系统中的格式有 fat fat 16  fat32   分区大小也会受到限制、文件的大小会受到限制，安全性能不高。</p>
<p> NTFS   支持大容量分区，支持NTFS权限设置，安全性能较高</p>
<p> Linux系统中的常用格式有 ext2 ext3 ext4</p>
<h2 id="4-磁盘分区"><a href="#4-磁盘分区" class="headerlink" title="4.磁盘分区"></a>4.磁盘分区</h2><p>​    步骤一：向Linux服务器添加一块硬盘，并重启系统。</p>
<h3 id="步骤二：查看系统当中的硬盘及其分区信息"><a href="#步骤二：查看系统当中的硬盘及其分区信息" class="headerlink" title="步骤二：查看系统当中的硬盘及其分区信息"></a>步骤二：查看系统当中的硬盘及其分区信息</h3><p>​            ls /dev/sd*   查看/dev目录下的硬盘文件</p>
<p>​            <strong>fdisk -l</strong>   查看硬盘分区的信息</p>
<h3 id="步骤三：对磁盘进行分区"><a href="#步骤三：对磁盘进行分区" class="headerlink" title="步骤三：对磁盘进行分区"></a>步骤三：对磁盘进行分区</h3><p>​             <strong>fdisk /dev/sdb</strong>   对sdb这块硬盘进行分区</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1576858883150.png" alt="1576858883150"></p>
<h3 id="步骤四：格式化磁盘"><a href="#步骤四：格式化磁盘" class="headerlink" title="步骤四：格式化磁盘"></a>步骤四：格式化磁盘</h3><p>​            mkfs -t 分区格式 分区名称</p>
<p>​            mkfs -t ext4 /dev/sdb1</p>
<p>​                     举例：将/dev/sdb1 格式化为 ext4 文件系统。<br>​                     [root@localhost ~]# mkfs -t ext4 /dev/sdb1</p>
<h3 id="步骤五：挂载分区"><a href="#步骤五：挂载分区" class="headerlink" title="步骤五：挂载分区"></a>步骤五：挂载分区</h3><p>​           mount  -t  分区格式 设备名称  空目录名称<br>​           mount  -t  ext4  /dev/sdb1  /mnt/sdb1<br>​           mount  -t  ext4  -o  ro  /dev/sdb1  /mnt/sdb1</p>
<p>​           检查是否挂载成功：mount<br>​           <strong>取消挂载</strong>：umount 挂载目录的名称 （不能在挂载目录下进行）<br>​           <strong>查看已挂载分区的信息</strong>：df -hT /mnt/sdb1<br>​           使用mount命令挂载的文件系统，只是临时的，如果系统重启则需要重新挂载。</p>
<h3 id="mount-命令"><a href="#mount-命令" class="headerlink" title="mount 命令"></a>mount 命令</h3><p> 命令格式：mount [选项] [设备名] [挂载点]<br>选项 功能说明<br>-t fstype 指定要挂载的文件系统的类型，如果不清楚，可以使用-t auto 让系统 自己选择最合适的文件系统类型挂载。<br>-r 以只读的方式挂载文件系统<br>4<br>-w 以读写的方式挂载文件系统，默认选项<br>-o 设置挂载属性<br>-a 挂载/etc/fstab 文件中记录的设备</p>
<h3 id="步骤六：可以使用-etc-fstab文件对文件系统进行永久挂载。"><a href="#步骤六：可以使用-etc-fstab文件对文件系统进行永久挂载。" class="headerlink" title="步骤六：可以使用/etc/fstab文件对文件系统进行永久挂载。"></a>步骤六：可以使用/etc/fstab文件对文件系统进行永久挂载。</h3><p>   步骤七：挂载光盘（光盘的设备文件名为：/dev/sr0,文件系统的类型为：iso9660)<br>           mount -t iso9660 /dev/sr0 /mnt/cdrom<br>   步骤八：挂载U盘</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/Web服务器/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="一、发布公司网站"><a href="#一、发布公司网站" class="headerlink" title="一、发布公司网站"></a><strong>一、发布公司网站</strong></h1><h2 id="1、安装Apache服务"><a href="#1、安装Apache服务" class="headerlink" title="1、安装Apache服务"></a>1、安装Apache服务</h2><p> # yum install -y httpd </p>
<p>#systemctl start httpd.service     启动服务</p>
<p>​        <strong>/etc/httpd/conf</strong>：该目录存放Apache服务器的<strong>配置文件</strong></p>
<p>​        <strong>/var/www/html</strong>：该目录是Apache服务器的默认<strong>站点根目录</strong></p>
<p>​        /etc/httpd/logs:Apache服务器的日志文件目录</p>
<p>2、测试Apache是否安装成功</p>
<p> 在浏览器的地址栏输入：localhost进行测试</p>
<p>3、将公司网站exam复制到/var/www/html/目录下，并修改配置文件：</p>
<p>  Vim  /etc/httpd/conf/httpd.conf</p>
<pre><code>修改：DocumentRoot &quot;/var/www/html/&quot;为</code></pre><p>​                        DocumentRoot “/var/www/html/exam”</p>
<p> 4、【修改完配置文件后必须要重启服务：<strong>systemctl restart httpd</strong>】</p>
<h1 id="二、基于端口号访问"><a href="#二、基于端口号访问" class="headerlink" title="二、基于端口号访问"></a>二、基于端口号访问</h1><p>项目考核信息网站部署完成后，考虑到站点是内部网站，为了保证安全，将首页改为exam.html，并使用8080端口访问。</p>
<p><strong>改首页名字：</strong>#mv /var/www/html/exam/index.html                         </p>
<p>/v ar/www/html/exam/exam.html</p>
<p><strong>修改配置文件</strong>：Vim/etc/httpd/conf/httpd.conf</p>
<p>​                            Listen 8080</p>
<p>​                            DirectoryIndex exam.html index.html</p>
<p><strong>重启服务：</strong>systemctl restart httpd</p>
<p><strong>访问测试：</strong>192.168.75.128:8080<strong>1**</strong>、基于域名的虚拟主机*</p>
<h1 id="三、基于域名的虚拟主机"><a href="#三、基于域名的虚拟主机" class="headerlink" title="三、基于域名的虚拟主机"></a>三、基于域名的虚拟主机</h1><h2 id="（1）域名注册"><a href="#（1）域名注册" class="headerlink" title="（1）域名注册"></a>（1）域名注册</h2><p><strong>vim  /etc/hosts：</strong></p>
<p>192.168.75.128 exam.excesoft.com</p>
<p>域名测试：nslookup</p>
<h2 id="（2）将两个网站放到-var-www-html-目录下"><a href="#（2）将两个网站放到-var-www-html-目录下" class="headerlink" title="（2）将两个网站放到/var/www/html/目录下"></a>（2）将两个网站放到/var/www/html/目录下</h2><h2 id="（3）修改主配置文件："><a href="#（3）修改主配置文件：" class="headerlink" title="（3）修改主配置文件："></a>（3）修改主配置文件：</h2><p>​        vim /etc/httpd/conf/httpd.conf</p>
<p>​        Listen 80</p>
<p>​        DirectoryIndex index.html</p>
<p>​        在末尾增加：Include conf/<strong>vhost</strong>/*.conf</p>
<h2 id="（4）修改exam-conf和attendance-conf配置文件"><a href="#（4）修改exam-conf和attendance-conf配置文件" class="headerlink" title="（4）修改exam.conf和attendance.conf配置文件"></a>（4）修改exam.conf和attendance.conf配置文件</h2><p>​       在/etc/httpd/conf 目录下新建vhost目录，并在下面新建exam.conf与attendance.conf两个</p>
<p><strong>域名配置文件，并作如下编辑。</strong></p>
<p>#vim exam.conf</p>
<p>​            &lt;VirtualHost 192.168.75.128&gt;</p>
<p>​            ServerName exam.excesoft.com</p>
<p>​            DocumentRoot /var/www/exam/</p>
<p>​            &lt;Directory “/var/www/exam/”&gt;</p>
<p>​            Options Indexes FollowSymLinks  //显示网页文件列表</p>
<p>​            AllowOverride NOne        //忽略.htaccess 文件</p>
<p>​            Require all granted       //允许所有</p>
<p>​            </p>
<p>​            </p>
<p>#vim attendance.conf</p>
<p>​            &lt;VirtualHost 192.168.75.128&gt;</p>
<p>​            ServerName attendance.excesoft.com</p>
<p>​            DocumentRoot /var/www/attendance/</p>
<p>​            &lt;Directory “/var/www/attendance/”&gt;</p>
<p>​            Options Indexes FollowSymLinks  //显示网页文件列表</p>
<p>​            AllowOverride NOne        //忽略.htaccess 文件</p>
<p>​            Require all granted       //允许所有</p>
<p>​            </p>
<p>​            </p>
<p> <strong>使用httpd -t检查虚拟主机的配置是否正确</strong></p>
<h2 id="5-重启Apache服务并进行测试"><a href="#5-重启Apache服务并进行测试" class="headerlink" title="(5)   重启Apache服务并进行测试"></a><strong>(5)</strong>   重启Apache服务并进行测试</h2><p><strong>systemctl</strong> <strong>restart httpd</strong> </p>
<h1 id="四、基于IP地址的虚拟主机"><a href="#四、基于IP地址的虚拟主机" class="headerlink" title="四、基于IP地址的虚拟主机"></a>四、基于IP地址的虚拟主机</h1><p>要求：</p>
<p>192.168.75.128：test1站点，域名：<a href="http://www.test1.com,站点目录是/var/www/html/test1,使用80端口；" target="_blank" rel="noopener">www.test1.com,站点目录是/var/www/html/test1,使用80端口；</a></p>
<p>192.168.75.228：test2站点，域名：<a href="http://www.test2.com,站点目录是/var/www/html/test2,使用80端口；" target="_blank" rel="noopener">www.test2.com,站点目录是/var/www/html/test2,使用80端口；</a></p>
<p>操作：</p>
<p>[root@localhost ~]# mkdir /var/www/html/test1</p>
<p>[root@localhost ~]# vim /var/www/html/test1/<strong>index.html</strong></p>
<p>[root@localhost ~]# mkdir /var/www/html/test2</p>
<p>[root@localhost ~]# vim /var/www/html/test2/<strong>index.html</strong></p>
<h2 id="域名注册"><a href="#域名注册" class="headerlink" title="域名注册"></a>域名注册</h2><p>修改文件<strong>vim</strong>   <strong>/etc/hosts</strong></p>
<p>172.16.16.223 <a href="http://www.test1.com" target="_blank" rel="noopener">www.test1.com</a></p>
<p>172.16.16.224 <a href="http://www.test2.com" target="_blank" rel="noopener">www.test2.com</a></p>
<h2 id="IP地址分配"><a href="#IP地址分配" class="headerlink" title="IP地址分配"></a>IP地址分配</h2><p>[root@localhost ~]# ifconfig ens33:01 172.16.16.223/24 up</p>
<p>[root@localhost ~]# ifconfig ens33:02 172.16.16.224/24 up</p>
<h2 id="修改主配置文件"><a href="#修改主配置文件" class="headerlink" title="修改主配置文件"></a>修改主配置文件</h2><p>[root@localhost ~]# vim /etc/httpd/conf/httpd.conf</p>
<p>​             DirectoryIndex index.html</p>
<p>​             DocumentRoot “/var/www/html/“</p>
<p>​             Include conf/vhost/*.conf</p>
<h2 id="修改test1-conf文件"><a href="#修改test1-conf文件" class="headerlink" title="修改test1.conf文件"></a>修改test1.conf文件</h2><p>[root@localhost ~]# vim /etc/httpd/conf/vhost/test1.conf</p>
<pre><code>&lt;VirtualHost 172.16.16.223&gt;    </code></pre><p>​            DocumentRoot /var/www/html/test1</p>
<p>​            &lt;Directory “/var/www/html/test1”&gt;</p>
<p>​            Options Indexes FollowSymLinks  </p>
<p>​            AllowOverride NOne        </p>
<p>​            Require all granted       </p>
<p>​            </p>
<p>​            </p>
<h2 id="修改test2-conf文件"><a href="#修改test2-conf文件" class="headerlink" title="修改test2.conf文件"></a>修改test2.conf文件</h2><p>[root@localhost ~]# vim /etc/httpd/conf/vhost/test2.conf</p>
<p>​            &lt;VirtualHost 172.16.16.224&gt;</p>
<p>​            DocumentRoot /var/www/html/test2</p>
<pre><code>&lt;Directory “/var/www/html/test2”&gt;</code></pre><p>​            Options Indexes FollowSymLinks  </p>
<p>​            AllowOverride NOne        </p>
<p>​            Require all granted       </p>
<p>​            </p>
<p>​            </p>
<h2 id="重启Apache服务"><a href="#重启Apache服务" class="headerlink" title="重启Apache服务"></a>重启Apache服务</h2><p>​            <strong>systemctl restart httpd</strong></p>
<h1 id="五、虚拟目录"><a href="#五、虚拟目录" class="headerlink" title="五、虚拟目录"></a>五、虚拟目录</h1><img src="C:\Users\asus\Desktop\1577374504220.png" alt="1577374504220" style="zoom: 200%;">



<p>虚拟目录:<br>安全:如何限制用户和特定网络访问网站?|</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/vsftp服务器/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>​      1、使用yum安装vsftpd软件包 </p>
<p>​             #yum install vsftpd ftp</p>
<p>​      2、启动服务并设置开机自启<br>​        #systemctl start vsftpd.service<br>​        #systemctl enable vsftpd.service</p>
<p>​      3、设置防火墙与selinux机制<br>​        #systemctl stop firewalld<br>​        #setenforce 0</p>
<h1 id="匿名用户访问FTP"><a href="#匿名用户访问FTP" class="headerlink" title="匿名用户访问FTP"></a>匿名用户访问FTP</h1><p>​        默认目录是：/var/ftp  </p>
<p>​        ftp的配置文件是：/etc/vsftpd/vsftpd.conf  </p>
<p>相关命令：</p>
<p>设置<strong>匿名</strong>用户访问ftp：    anonymous_enable=YES</p>
<p>登录ftp时<strong>不输入密码</strong>  ：  no_anon_password=YES  </p>
<p>设置匿名用户<strong>上传</strong>文件：  anon_upload_enable=YES  </p>
<p>设置匿名用户<strong>新建</strong>文件：       anon_mkdir_write_enable=YES  </p>
<p>设置匿名用户<strong>删除</strong>文件：       anon_other_write_enable=yes  </p>
<p> <strong>修改</strong>匿名用户访问ftp的<strong>默认目录</strong>  ： anon_root=/mnt/ftp</p>
<h2 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h2><p>设置匿名用户上传或新建文件的权限</p>
<p>如果使用vsftp的是本地用户，则要修改配置文件中的 local_umask 的值；</p>
<p> 如果使用vsftp的是虚拟用户，则要修改配置文件中的 <strong>anon_umask</strong> 的值。</p>
<p>umask = 022 时，新建的目录 权限是755，文件的权限是 644；</p>
<h1 id="系统用户访问FTP服务器"><a href="#系统用户访问FTP服务器" class="headerlink" title="系统用户访问FTP服务器"></a>系统用户访问FTP服务器</h1><p>​         系统用户默认访问主目录，具有上传、下载、新建、删除的权限，还可以切换到的系统其他目录  </p>
<p>anonymous_enable=no</p>
<p>local_enable=yes</p>
<p>local_root=/mnt/public/  设置系统用户访问ftp的默认目录</p>
<p>write_enable=YES     允许写入</p>
<p>chroot_local_user=YES   控制用户访问路径访问指定目录，不能切换到其他目录</p>
<p>allow_writeable_chroot=YES 允许写入q</p>
<p>黑名单  ： /etc/vsftpd/ftpusers  </p>
<p>白名单  ：  /etc/vsftpd/user_list  </p>
<p>当存在userlist_enable=YES时，user_list文件生效。</p>
<p>当存在userlist_deny=YES时，则仅禁止列表中的帐户登录。</p>
<p>当存在userlist_deny=NO时，则允许列表中用户登录。 </p>
<h1 id="虚拟用户访问FTP"><a href="#虚拟用户访问FTP" class="headerlink" title="虚拟用户访问FTP"></a>虚拟用户访问FTP</h1><p>1、安装Vsftpd虚拟用户需要用到的软件及认证模块</p>
<p>  #yum install pam* libdb-utils libdb* –skip-broken -y</p>
<p>2、创建虚拟用户临时文件/etc/vsftpd/ftpusers.txt,用户名密码格式如下：</p>
<p>techftp</p>
<p>123456</p>
<p>3、生成Vsftpd虚拟用户数据库认证文件，设置权限为600</p>
<p>  #db_load -T -t hash -f /etc/vsftpd/ftpusers.txt /etc/vsftpd/vsftp_login.db</p>
<p>  #chmod 600 /etc/vsftpd/vsftp_login.db  </p>
<p>4、配置PAM认证文件：vim /etc/pam.d/vsftpd.vu</p>
<p>  auth  required  pam_userdb.so  db=/etc/vsftpd/vsftp_login</p>
<p>  account required pam_userdb.so db=/etc/vsftpd/vsftp_login</p>
<p>5、创建一个系统用户，用于虚拟用户映射</p>
<p>  #useradd -s /sbin/nologin ftpuser</p>
<p>6、修改配置文件：#vim /etc/vsftpd/vsftpd.conf </p>
<p>  #pam_service_name=vsftpd</p>
<p>  pam_service_name=vsftpd.vu</p>
<p>  guest_enable=YES</p>
<p>  guest_username=ftpuser</p>
<p>  user_config_dir=/etc/vsftpd/vsftpd_user_conf</p>
<p>  virtual_use_local_privs=YES</p>
<p>7、分别为虚拟用户创建私有的虚拟目录与独立的配置文件</p>
<p>  #mkdir /home/ftpuser/techftp</p>
<p>  #mkdir /etc/vsftpd/vsftpd_user_conf</p>
<p>  #vim techftp</p>
<p>   local_root=/home/ftpuser/techftp</p>
<p>   write_enable=YES</p>
<p>   anon_world_readable_only=YES</p>
<p>   anon_upload_enable=YES</p>
<p>   anon_mkdir_write_enable=YES</p>
<p>   anon_other_write_enable=YES</p>
<p>  #mkdir /home/ftpuser/netftp</p>
<p>  #vim netftp</p>
<p>   local_root=/home/ftpuser/netftp</p>
<p>   write_enable=YES</p>
<p>virtual_use_local_privs=NO    #不具有可登录用户的权限   </p>
<p>anon_world_readable_only=YES       #可浏览目录</p>
<p>   anon_upload_enable=YES</p>
<p>   anon_mkdir_write_enable=YES</p>
<p>   anon_other_write_enable=YES</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/Untitled/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577674919200.png" alt="1577674919200"></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/samba服务器/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="1-、修改防火墙设置"><a href="#1-、修改防火墙设置" class="headerlink" title="1 、修改防火墙设置"></a>1 、修改防火墙设置</h2><h2 id="2-、-安装-samba-并启动-samba-服务"><a href="#2-、-安装-samba-并启动-samba-服务" class="headerlink" title="2 、 安装 samba 并启动 samba 服务"></a>2 、 安装 samba 并启动 samba 服务</h2><p>#yum install -y samba samba-client</p>
<p>#systemctl start smb.service nmb.service</p>
<h2 id="3-、-建立共享目录"><a href="#3-、-建立共享目录" class="headerlink" title="3 、 建立共享目录"></a>3 、 建立共享目录</h2><p>mkdir /home/company</p>
<h2 id="4-、创建访问账号"><a href="#4-、创建访问账号" class="headerlink" title="4 、创建访问账号"></a>4 、创建访问账号</h2><p>useradd -s /sbin/nologin smbuser</p>
<p>#smbpasswd -a smbuser</p>
<p>【smbpasswd 选项说明： -a 添加 smb 帐号；x-x 删除 smb 帐号； -d 禁用  smb 帐号； -e 启用smb 帐号】</p>
<h2 id="5-、修改配置文件：-etc-samba-smb-conf"><a href="#5-、修改配置文件：-etc-samba-smb-conf" class="headerlink" title="5 、修改配置文件： /etc/samba/smb.conf"></a>5 、修改配置文件： /etc/samba/smb.conf</h2><p>默认情况下，Samba 已经配置为允许用户通过远程共享访问账号的主目录。</p>
<p>[company] //共享名称为 company<br>comment = company share//共享注释<br>path = /home/company //指定共享路径<br>browseable = yes //所有人可见<br>guest ok = no //拒绝匿名访问<br>writeable = yes //支持写入数据</p>
<p>[company]<br>comment = company share<br>path = /home/company<br>guest ok = no //拒绝匿名访问<br>valid users=xzusr,gcusr,xsusr //允许访问的用户列表<br>write list=xzusr //允许写入的用户列表</p>
<p>注意：修改配置文件以后，必须重启服务（systemctl t restart b smb nmb）</p>
<h2 id="6-、测试-Samba-服务器"><a href="#6-、测试-Samba-服务器" class="headerlink" title="6 、测试 Samba 服务器"></a>6 、测试 Samba 服务器</h2><p>在 linux 客户端访问测试：smbclient -U smbuser //192.168.75.128/company</p>
<p>查看服务器的共享文件有哪些：smbclient -L 192.168.75.128</p>
<p>查看 smbuser 用户可以访问的共享文件：smbclient -L 192.168.75.128 -U         smbuser</p>
<h2 id="7、linux、windows文件共享"><a href="#7、linux、windows文件共享" class="headerlink" title="7、linux、windows文件共享"></a>7、linux、windows文件共享</h2><p>在 x Linux 下访问 s Windows 共享目录的配置方法</p>
<p>（1）在 Windows xp 上设置一个共享目录：d:\myfiles</p>
<p>（2）在 Linux 下安装 samba-client 客户端</p>
<p>​            #yum install samba-client</p>
<p>（3）安装 cifs-utils 软件包</p>
<p>​            #yum install cifs-utils</p>
<p>（4）在 Linux 下创建一个挂载点</p>
<p>​            #mkdir /mnt/Windows</p>
<p>（5）挂载 Windows 上的共享目录 d:\myfiles 到 Linux 下的/mnt/Windows 目录下</p>
<p>​        #mount -t cifs -o username=smbuser//192.168.0.3/company                 /mnt/Windows</p>
<p>​            Enter password: <strong>****</strong><br>（6）如果挂载成功，则可以进入/mnt/Windows 下进行相应操作。</p>
<p>（7）在/etc/fstab 文件中，加入该共享目录的挂载信息<br>//192.168.1.123/redhat_disk /mnt/Windows cifs username=tommy,password=111111 0 0</p>
<p>（8）到此为止，Windows 上的共享目录//192.168.1.123/redhat_disk 就被成功挂载到了 Linux<br>上面了，并且 Linux 重启后，会自动挂载该目录到/mnt/Windows 目录下</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2019/12/30/quota磁盘配额管理/">
                Untitled
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2019-12-30</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577150193627.png" alt="1577150193627"></p>
<h1 id="1、磁盘配额的概念"><a href="#1、磁盘配额的概念" class="headerlink" title="1、磁盘配额的概念"></a>1、磁盘配额的概念</h1><p>quota 磁盘配额功能只在指定的文件系统（分区）内有效，未设置配额的文件系统不受限制。</p>
<p> quota 针对指定的用户账号、组账号进行限制，其他用户或组不受影响。 磁盘配额可以进行两方面的限制：磁盘容量、文件数量。 </p>
<p>磁盘容量：限制用户能够使用的磁盘数据块（block）大小，也就是限制磁盘空间大小， 默认单位为 KB。 </p>
<p>文件数量：限制用户能够拥有的文件个数。</p>
<p> 磁盘配额的限制方法分为软限制和硬限制两种。</p>
<p> 软限制:指设定一个软性的配额数值（如 500MB 磁盘空间、200 个文件） ，在固定的宽限期（默 认为 7 天）内允许暂时超过这个限制，但系统会给出警告信息。</p>
<p> 硬限制:指设定一个硬性的配额数值（如 1GB 磁盘空间、500 个文件） ，而且绝对禁止用户超 过该限值。<strong>硬限制的配额值应大于相应的软限制值，否则软限制值将失效。</strong> </p>
<h1 id="2、设置磁盘配额"><a href="#2、设置磁盘配额" class="headerlink" title="2、设置磁盘配额"></a>2、设置磁盘配额</h1><p>下面以硬盘分区“/dev/sdb1”为例，先将其挂载到“/data”目录下，然后在文件系统中实现磁盘配额： </p>
<h2 id="（1）启用-quota-磁盘配额"><a href="#（1）启用-quota-磁盘配额" class="headerlink" title="（1）启用 quota 磁盘配额"></a>（1）启用 quota 磁盘配额</h2><p> 首先要通过<u><strong>修改配置文件</strong></u>“/etc/fstab”的方式启用 quota 磁盘配额。 </p>
<p>[root@localhost var]# vim /etc/fstab /dev/sdb1 /data ext4 defaults,usrquota,grpquota 0 0</p>
<p>将该文件系统<u><strong>重新挂载</strong></u> [root@localhost ~]# mount -o remount /data</p>
<p>执行 mount 命令查看已经挂载的文件系统，检查是否已经启用了 usrquota 和 grpquota 功能 </p>
<p>[root@localhost ~]# mount | grep sdb1 /dev/sdb1 on /data type ext4 (rw,usrquota,grpquota) </p>
<h2 id="（2）生成配额文件"><a href="#（2）生成配额文件" class="headerlink" title="（2）生成配额文件"></a>（2）生成配额文件</h2><p> quotacheck 命令可以对文件系统进行磁盘配额检测，发现哪些文件系统启用了 磁</p>
<p>盘配额功能，并在这些文件系统中生成配额文件 aquota.user 和 aquota.group。 </p>
<p>[root@localhost ~]# quotacheck -cvug /data </p>
<p>相关选项的作用： </p>
<p>-c，创建配额文件。</p>
<p> -v，显示详细信息。</p>
<p> -u，检查用户配额信息，创建 aquota.user 文件。</p>
<p> -g，检查组配额信息，创建 aquota.group 文件。</p>
<p>[root@localhost ~]# setenforce 0 ’将 SELinux 设为许可模式</p>
<p> [root@localhost ~]# quotacheck -cvug /data ’再次执行 quotacheck 命令</p>
<p>[root@localhost ~]# ls /data ’查看生成的配额文件 </p>
<p>aquota.group aquota.user lost+found </p>
<h2 id="（3）编辑用户和组帐号的配额设置"><a href="#（3）编辑用户和组帐号的配额设置" class="headerlink" title="（3）编辑用户和组帐号的配额设置"></a>（3）编辑用户和组帐号的配额设置</h2><p>编辑用户的配额设置</p>
<p> 使用 edquota 命令结合“-u”、 “-g”选项可用于编辑用户或组的配额设置。</p>
<p> 创建 financial 组，创建用户 jerry，将 financial 指定为 jerry 的基本组。 </p>
<p>[root@localhost ~]# edquota -u jerry ’设置用户 jerry 的磁盘配额</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577115176641.png" alt="1577115176641">Filesystem:表示本行配置对应的文件系统（分区），即配额的作用范围。 </p>
<p>blocks:表示当前已使用的磁盘容量，默认单位为 KB。该值由 edquota 程序自动计算生成。 </p>
<p>soft:第 3 列中的 soft 对应为磁盘容量的软限制数值，默认单位为 KB； </p>
<p>​        第 6 列中的 soft 对应为文件数量的软限制数值位为个。</p>
<p> hard:第 4 列中的 hard 对应为磁盘容量的硬限制数值，默认单位为 KB； </p>
<p>​         第 7 列中的 hard 对应为文件数量的硬限制数值，默认单位为个；</p>
<p>inodes:表示当前已拥有的文件数量。该值由 edquota 程序自动计算生成。</p>
<p> 编辑组的配额设置 [root@localhost ~]# edquota -g financial ’设置 financial 组的磁盘配额</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577115320946.png" alt="1577115320946"><br>配额设置仅对基本组生效。如用户 jerry 所属的基本组是“financial”，所属的附加组是“technology”， 那么只有针对“financial”组设置的配额才对 jerry 有效，而针对“technology”组设置的配额则对 jerry 没有限制。</p>
<h2 id="（4）激活磁盘配额"><a href="#（4）激活磁盘配额" class="headerlink" title="（4）激活磁盘配额"></a>（4）激活磁盘配额</h2><p> [root@localhost ~]# quotaon -ugv /data ’激活“/data”文件系统的用户、组配额 </p>
<p>/dev/sdb1 [/data]: group quotas turned on </p>
<p>/dev/sdb1 [/data]: user quotas turned on </p>
<p>相关选项的作用：</p>
<p>​         -u，激活用户磁盘配额。</p>
<p>​         -g，激活组磁盘配额。 </p>
<p>​         -v，显示详细信息。 </p>
<h2 id="（5）验证并查看磁盘配额"><a href="#（5）验证并查看磁盘配额" class="headerlink" title="（5）验证并查看磁盘配额"></a>（5）验证并查看磁盘配额</h2><p>验证磁盘配额功能： 下面使用受配额限制的用户帐号（jerry）登录 Linux 系统，并向应用了配额的文 件系统进行复制文件等写操作，测试所设置磁盘配额项是否有效。</p>
<p> 用 dd 命令生成指定大小的测试文件 从设备文件/dev/zero 中复制数据到/home/jerry/test 文件，读取 210 个大小为 1MB 的数据块。<br>[jerry@localhost ~]# dd if=/dev/zero of=/mnt/data bs=1KB count=120 </p>
<p>查看用户或分区的配额使用情况 使用 quota 命令结合“-u” 、“-g”选项分别查看指定用户和组的配额使用情况。</p>
<p><img src="C:%5CUsers%5Casus%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1577115800308.png" alt="1577115800308"></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="disabled" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2019/12/30/用户与组的管理/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/12/30/网络连接/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/12/30/软件安装与包管理工具/">Untitled</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2019/12/30/服务与进程/">Untitled</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>